import{r as m,j as e}from"./index-b9ab5773.js";import{a as g,P as d,Q as u,k as w}from"./index-4b3d0e90.js";import{L as b}from"./Loader-926100a2.js";const N=async r=>{try{const{data:t}=await g.get(`/orders?query=${r}`);return t.message==="Not Found"?[]:t.data.result}catch(t){console.log(t.message)}},P=(r,t)=>{if(r==="phone"){if(!t.match(/^380\d{9}$/))return!1}else if(!t.match(/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/))return!1;return!0},v="_form_wrapper_134pu_1",H="_form_134pu_1",q="_label_134pu_30",F="_select_134pu_34",T="_input_part_134pu_42",$="_input_134pu_42",C="_submit_button_134pu_67",n={form_wrapper:v,form:H,label:q,select:F,input_part:T,input:$,submit_button:C},j=({onSubmit:r})=>{const[t,a]=m.useState("phone"),o=m.useRef(null),l=s=>{a(s.target.value)},p=s=>{s.preventDefault();const c=o.current.value,h=P(t,c);if(!h){u.warn("Check that the data entered is correct");return}if(h){if(c===""){u.info("Please enter info for searching");return}r(c)}};return e.jsx("div",{className:n.form_wrapper,children:e.jsxs("form",{className:n.form,children:[e.jsx("label",{className:n.label,htmlFor:"contact-type",children:e.jsx("span",{className:n.input_part,children:"Select a search method"})}),e.jsxs("select",{className:n.select,id:"contact-type",value:t,onChange:l,children:[e.jsx("option",{value:"phone",children:"Phone"}),e.jsx("option",{value:"email",children:"Email"})]}),e.jsx("label",{className:n.label,htmlFor:"contact-input",children:e.jsx("span",{className:n.input_part,children:"Enter contact information"})}),e.jsx("input",{className:n.input,type:t==="phone"?"tel":"email",id:"contact-input",ref:o,placeholder:t==="phone"?"380501111111":"example@mail.com"}),e.jsx("button",{className:n.submit_button,type:"submit",onClick:s=>p(s),children:"Order history"})]})})};j.propTypes={onSubmit:d.func.isRequired};const S="_card_1eb6o_1",R="_card_item_1eb6o_8",O="_totalPrice_wrapper_1eb6o_14",L="_image_wrapper_1eb6o_38",E="_image_1eb6o_38",k="_title_1eb6o_53",V="_price_1eb6o_59",z="_quantity_1eb6o_65",D="_total_1eb6o_14",i={card:S,card_item:R,totalPrice_wrapper:O,image_wrapper:L,image:E,title:k,price:V,quantity:z,total:D},x=({list:r,totalPrice:t})=>(r.map(a=>console.log(a)),e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:i.card,children:r.map(({title:a,price:o,imageUrl:l,quantity:p,_id:s})=>e.jsxs("li",{className:i.card_item,children:[e.jsx("div",{className:i.image_wrapper,children:e.jsx("img",{src:l,width:60,className:i.image})}),e.jsx("p",{className:i.title,children:a}),e.jsxs("p",{className:i.quantity,children:["count:",p]}),e.jsxs("p",{className:i.price,children:["price:",o,"$"]})]},s))}),e.jsx("div",{className:i.totalPrice_wrapper,children:e.jsxs("p",{className:i.total,children:["Total Price: ",t,"$"]})})]}));x.propTypes={list:d.array.isRequired,totalPrice:d.string.isRequired};const I="_history_list_zp7e3_1",Q="_history_item_zp7e3_15",y={history_list:I,history_item:Q},f=({orders:r})=>e.jsx("ul",{className:y.history_list,children:r.map(({list:t,totalPrice:a,_id:o})=>e.jsx("li",{className:y.history_item,children:e.jsx(x,{list:t,totalPrice:a})},o))});f.propTypes={orders:d.array.isRequired};const A="_page_container_1hitj_1",B="_content_wrapper_1hitj_7",G="_order_wrapper_1hitj_11",J="_title_1hitj_17",_={page_container:A,content_wrapper:B,order_wrapper:G,title:J},K=()=>{const[r,t]=m.useState(null),[a,o]=m.useState(!1),l=async s=>{try{o(!0);const c=await N(s);t(c?c.cart:[])}catch{u.error("Oops, something went wrong! Please try again")}finally{o(!1)}},p=s=>{l(s)};return e.jsx(e.Fragment,{children:e.jsxs("main",{className:_.page_container,children:[e.jsx(e.Fragment,{children:e.jsxs("div",{className:_.content_wrapper,children:[e.jsx(j,{onSubmit:p}),e.jsx("div",{className:_.order_wrapper,children:a?e.jsx(b,{}):e.jsx(e.Fragment,{children:r===null?e.jsx("p",{className:_.title,children:"To view your order history, enter your data"}):r.length===0?e.jsx("p",{className:_.title,children:"No order history found."}):e.jsx(f,{orders:r})})})]})}),e.jsx(w,{autoClose:2e3})]})})};K.displayName="HistoryPage";export{K as default};
