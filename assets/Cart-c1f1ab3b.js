import{j as e,r as g}from"./index-b9ab5773.js";import{Q as p,P as c,k as w,s as y}from"./index-4b3d0e90.js";const f=t=>{let a=0;return t.forEach(s=>{a+=s.price*s.quantity}),a.toFixed(2)},q=t=>{let a=!0;const s={};return t.name.trim()===""&&(a=!1,s.name="Name is required",p.warn(s.name)),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)||(a=!1,s.email="Invalid email address",p.warn(s.email)),t.address.trim()===""&&(a=!1,s.address="Address is required",p.warn(s.address)),/^380\d{9}$/.test(t.phone)||(a=!1,s.phone="Invalid phone number",p.warn(s.phone)),{isValid:a,errors:s}},C="_form_wrapper_mbur2_1",R="_form_mbur2_1",v="_label_mbur2_16",D="_input_part_mbur2_21",S="_input_mbur2_21",o={form_wrapper:C,form:R,label:v,input_part:D,input:S},x=({formData:t})=>{const a=s=>{const{name:d,value:m}=s.target;t.set(d,m)};return e.jsx("div",{className:o.form_wrapper,children:e.jsxs("form",{className:o.form,children:[e.jsxs("label",{className:o.label,children:[e.jsx("span",{className:o.input_part,children:"Name"}),e.jsx("input",{className:o.input,type:"text",name:"name",onChange:a,placeholder:"John"})]}),e.jsxs("label",{className:o.label,children:[e.jsx("span",{className:o.input_part,children:"Email"}),e.jsx("input",{className:o.input,type:"email",name:"email",onChange:a,placeholder:"example@mail.com"})]}),e.jsxs("label",{className:o.label,children:[e.jsx("span",{className:o.input_part,children:"Address"}),e.jsx("input",{className:o.input,type:"text",name:"address",onChange:a,placeholder:"Antonovycha str.75"})]}),e.jsxs("label",{className:o.label,children:[e.jsx("span",{className:o.input_part,children:"Phone"}),e.jsx("input",{className:o.input,type:"text",name:"phone",onChange:a,placeholder:"380501111111"})]})]})})};x.propTypes={formData:c.object.isRequired};const k="_card_1a1zj_1",P="_image_wrapper_1a1zj_6",O="_image_1a1zj_6",z="_title_1a1zj_21",I="_price_1a1zj_27",B="_addButton_1a1zj_34",E="_button_wrapper_1a1zj_47",$="_button_increment_1a1zj_53",J="_button_decrement_1a1zj_54",T="_count_1a1zj_78",l={card:k,image_wrapper:P,image:O,title:z,price:I,addButton:B,button_wrapper:E,button_increment:$,button_decrement:J,count:T},j=({id:t,imageUrl:a,title:s,price:d,quantity:m,handleButtonClick:i,handleDecrement:r,handleIncrement:n})=>e.jsxs("div",{className:l.card,children:[e.jsx("div",{className:l.image_wrapper,children:e.jsx("img",{className:l.image,width:200,height:80,src:a,alt:"meal"})}),e.jsxs("div",{children:[e.jsx("p",{className:l.title,children:s}),e.jsxs("p",{className:l.price,children:["Price: ",d,"$"]})]}),e.jsxs("div",{className:l.button_wrapper,children:[e.jsx("button",{className:l.button_decrement,onClick:r,children:"-"}),e.jsx("span",{className:l.count,children:m}),e.jsx("button",{className:l.button_increment,onClick:n,children:"+"})]}),e.jsx("button",{className:l.addButton,type:"button",onClick:()=>i(t),children:"Remove"})]});j.propTypes={id:c.string.isRequired,title:c.string.isRequired,imageUrl:c.string.isRequired,price:c.number.isRequired,quantity:c.number.isRequired,handleButtonClick:c.func.isRequired,handleIncrement:c.func.isRequired,handleDecrement:c.func.isRequired};const F="_wrapper_g1khf_1",V="_order_list_g1khf_11",A="_order_item_g1khf_24",L="_total_g1khf_38",Q="_text_g1khf_45",u={wrapper:F,order_list:V,order_item:A,total:L,text:Q},b=({orderedDish:t,handleButtonClick:a,setOrderedDish:s})=>{const d=i=>{const r=t.map(n=>n.id===i?{...n,quantity:n.quantity+1}:n);s(r),localStorage.setItem("dishes",JSON.stringify(r))},m=i=>{const r=t.map(n=>n.id===i&&n.quantity>1?{...n,quantity:n.quantity-1}:n);s(r),localStorage.setItem("dishes",JSON.stringify(r))};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:u.wrapper,children:[e.jsxs("p",{className:u.total,children:["Total Price: ",f(t),"$"]}),t.length>0?e.jsx("ul",{className:u.order_list,children:t.map(({id:i,imageUrl:r,title:n,price:_,quantity:N})=>e.jsx("li",{className:u.order_item,children:e.jsx(j,{id:i,imageUrl:r,title:n,price:_,quantity:N,handleIncrement:()=>d(i),handleDecrement:()=>m(i),handleButtonClick:a})},i))}):e.jsx("img",{src:"https://i.postimg.cc/c4fSdRz9/25518797c3883faa8c2b68d427367eba.png",alt:"cart is empty",width:600})]})})};b.propTypes={orderedDish:c.array.isRequired,handleButtonClick:c.func,setOrderedDish:c.func};const U="_page_container_1t5oo_1",Y="_content_wrapper_1t5oo_7",G="_cartPage_title_1t5oo_11",H="_submit_button_1t5oo_16",h={page_container:U,content_wrapper:Y,cartPage_title:G,submit_button:H},W=()=>{const t=new FormData,[a,s]=g.useState([]);g.useEffect(()=>{const i=JSON.parse(localStorage.getItem("dishes"))||[];s(i);const r=n=>{if(n.key==="dishes"){const _=JSON.parse(n.newValue)||[];s(_)}};return window.addEventListener("storage",r),()=>{window.removeEventListener("storage",r)}},[]);const d=i=>{const r=a.filter(n=>n.id!==i);s(r),localStorage.setItem("dishes",JSON.stringify(r))},m=async i=>{if(i.preventDefault(),t.get("name")===null||t.get("address")===null||t.get("email")===null||t.get("phone")===null){p.info("Please fill all fields and choose dishes");return}if(a.length===0){p.info("Please choose dishes");return}try{const r={name:t.get("name"),email:t.get("email"),address:t.get("address"),phone:t.get("phone"),dishes:a,totalPrice:f(a)},{isValid:n}=q(r);if(n)await y(r).then(()=>{p.info("Your order was successful")}),localStorage.removeItem("dishes"),s([]);else return}catch(r){p.warn("Oops! Something went wrong"),console.log(r.message)}};return e.jsxs("main",{className:h.page_container,children:[e.jsx("button",{className:h.submit_button,onClick:i=>m(i),children:"Place an order"}),e.jsxs("div",{className:h.content_wrapper,children:[e.jsx(x,{formData:t}),e.jsx(b,{orderedDish:a,handleButtonClick:d,setOrderedDish:s})]}),e.jsx(w,{autoClose:2e3})]})};export{W as default};
